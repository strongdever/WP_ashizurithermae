var sowb=window.sowb||{};sowb.SiteOriginSlider=function(e){return{playSlideVideo:function(i){e(i).find("video").each((function(){void 0!==this.play&&this.play()}));var t=e(i).find(".sow-slide-video-oembed iframe");t.length&&(t[0].contentWindow.postMessage('{"method":"play"}',"*"),t[0].contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*"))},pauseSlideVideo:function(i){e(i).find("video").each((function(){void 0!==this.pause&&this.pause()}));var t=e(i).find(".sow-slide-video-oembed iframe");t.length&&(t[0].contentWindow.postMessage('{"method":"pause"}',"*"),t[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"))},setupActiveSlide:function(i,t,s){var a=e(i).find(".cycle-sentinel"),o=e(t),n=o.find("video.sow-background-element"),d=e(i).prev();if(void 0===s?a.css("height",o.outerHeight()+"px"):a.animate({height:o.outerHeight()},s),d.length){e(i).find(".sow-slider-image > video").prop("muted",!0);var l=o.find("> video");if(l.length){d.clearQueue().fadeIn(s);var r=d.siblings(".sow-slider-images").data("settings");l.hasClass("sow-player-unmuted")?(l.prop("muted",!1),d.addClass("sow-player-unmuted"),d.attr("aria-label",r.muteLoc)):(d.removeClass("sow-player-unmuted"),d.attr("aria-label",r.unmuteLoc))}else d.clearQueue().fadeOut(s)}n.length&&(o.outerWidth()/o.outerHeight()>n.outerWidth()/n.outerHeight()?n.css({width:"100%",height:"auto"}):n.css({width:"auto",height:"100%"}),n.css({"margin-left":-Math.ceil(n.width()/2),"margin-top":-Math.ceil(n.height()/2)}))}}},jQuery((function(e){sowb.setupSliders=sowb.setupSlider=function(){var i=new sowb.SiteOriginSlider(e);e(".sow-slider-images").each((function(){var t=e(this);if(t.data("initialized"))return t;var s=t.siblings(".sow-slider-pagination"),a=t.closest(".sow-slider-base"),o=a.find(".sow-slide-nav"),n=t.find(".sow-slider-image"),d=t.data("settings");d.breakpoint&&e(window).on("load resize",(function(){window.matchMedia("(max-width: "+d.breakpoint+")").matches?a.addClass("sow-slider-is-mobile"):a.removeClass("sow-slider-is-mobile")})),n.each((function(i,t){var s=e(t),a=s.data("url");void 0!==a&&a.hasOwnProperty("url")&&(s.on("click",(function(e){e.preventDefault(),window.open(a.url,a.hasOwnProperty("new_window")&&a.new_window?"_blank":"_self").opener=null})),s.find("a").on("click",(function(e){e.stopPropagation()})))}));var l=function(){var r=t.closest(".so-widget-fittext-wrapper");if(r.length>0&&!r.data("fitTextDone"))r.on("fitTextDone",(function(){l()}));else{var c=t.find(".sow-slider-image-parallax[data-siteorigin-parallax]").length,u=!1;if(!c){var w=t.find(".sow-slider-image-parallax:not([data-siteorigin-parallax])");!w.length||"undefined"==typeof parallaxStyles||parallaxStyles["disable-parallax-mobile"]&&window.matchMedia("(max-width: "+parallaxStyles["mobile-breakpoint"]+")").matches||(u=!0,a.css("opacity",0))}a.show();var p=function(){t.find(".sow-slider-image").each((function(){var i=e(this);i.css("height",i.find(".sow-slider-image-wrapper").outerHeight()+"px")}))};if(e(window).on("resize panelsStretchRows",p).trigger("resize"),e(sowb).on("setup_widgets",p),!c&&u){if(!w.find(".simpleParallax").length)return void setTimeout(l,50);window.dispatchEvent(new Event("resize")),setTimeout((function(){a.css("opacity",1)}),425)}if(t.trigger("slider_setup_before"),t.on({"cycle-after":function(t,s,a,o,n){var d=e(this);i.playSlideVideo(o),i.setupActiveSlide(d,o),e(o).trigger("sowSlideCycleAfter")},"cycle-before":function(t,a,o,n,d){var l=e(this);s.find("> li").removeClass("sow-active").eq(a.slideNum-1).addClass("sow-active"),i.pauseSlideVideo(o),i.setupActiveSlide(l,n,a.speed),e(n).trigger("sowSlideCycleBefore")},"cycle-initialized":function(a,n){i.playSlideVideo(e(this).find(".cycle-slide-active")),i.setupActiveSlide(t,n.slides[0]),s.find(">li").removeClass("sow-active").eq(0).addClass("sow-active"),e(this).find(".cycle-slide-active").trigger("sowSlideInitial"),n.slideCount<=1&&(s.hide(),o.hide()),e(window).trigger("resize"),setTimeout((function(){p(),i.setupActiveSlide(t,n.slides[0]),t.find(".cycle-sentinel").empty()}),200)}}).cycle({slides:"> .sow-slider-image",speed:d.speed,timeout:d.timeout,swipe:d.swipe,paused:d.paused,pauseOnHover:d.pause_on_hover,"swipe-fx":"scrollHorz",log:!1}),t.find("video.sow-background-element").on("loadeddata",(function(){i.setupActiveSlide(t,t.find(".cycle-slide-active"))})),s.add(o).hide(),n.length>1)if(a.hasClass("sow-slider-is-mobile"))d.nav_always_show_mobile&&window.matchMedia("(max-width: "+d.breakpoint+")").matches&&(s.show(),o.show());else if(d.nav_always_show_desktop&&window.matchMedia("(min-width: "+d.breakpoint+")").matches)s.show(),o.show();else{var f=!1;a.on("mouseenter",(function(){s.add(o).clearQueue().fadeIn(150),f=!1})).on("mouseleave",(function(){f=!0,setTimeout((function(){f&&s.add(o).clearQueue().fadeOut(150),f=!1}),750)}))}var h=function(){i.setupActiveSlide(t,t.find(".cycle-slide-active"))};e(window).on("resize",h),e(sowb).on("setup_widgets",h),s.find("> li > a").on("click",(function(i){i.preventDefault(),t.cycle("goto",e(this).data("goto"))})),o.find("> a").on("click",(function(i){i.preventDefault(),t.cycle(e(this).data("action"))})),a.on("keydown",(function(e){37===e.which?t.cycle("prev"):39===e.which&&t.cycle("next")})),d.unmute&&a.find(".sow-player-controls-sound").on("click",(function(){var i=e(this),t=i.next().find(".cycle-slide-active > video");t.prop("muted",!t.prop("muted")),t.prop("muted")?(i.removeClass("sow-player-unmuted"),t.removeClass("sow-player-muted"),i.attr("aria-label",d.unmuteLoc)):(i.addClass("sow-player-unmuted"),t.addClass("sow-player-unmuted"),i.attr("aria-label",d.muteLoc))}))}};t.trigger("slider_setup_after");var r=t.find("img.sow-slider-background-image, img.sow-slider-foreground-image"),c=0,u=!1;r.each((function(){e(this);this.complete?c++:e(this).one("load",(function(){++c!==r.length||u||(l(),u=!0)})).attr("src",e(this).attr("src")),c!==r.length||u||(l(),u=!0)})),0===r.length&&l(),t.data("initialized",!0)}))},sowb.setupSliders(),e(sowb).on("setup_widgets",sowb.setupSliders)})),window.sowb=sowb;