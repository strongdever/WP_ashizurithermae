var sowb=window.sowb||{};jQuery((function(s){sowb.setupCarousel=function(){s.fn.setSlideTo=function(i){$item=s(this);var e=$item.slick("slickGetOption","slidesToShow"),t=$item.slick("slickGetOption","slidesToScroll");$item.slick("slickSetOption","slidesToShow",1),$item.slick("slickSetOption","slidesToScroll",1),$item.slick("slickGoTo",i),$item.slick("slickSetOption","slidesToShow",e),$item.slick("slickSetOption","slidesToScroll",t)},s(".sow-carousel-wrapper").on("init",(function(i,e){s(this).css("opacity",1)})),s(".sow-carousel-wrapper").each((function(){var i=s(this),e=i.find(".sow-carousel-items"),t=i.data("responsive"),o=i.data("carousel_settings");if(e.not(".slick-initialized").slick({arrows:!1,dots:o.dots,appendDots:o.appendDots?i.find(".sow-carousel-nav"):i,rows:0,rtl:"rtl"==i.data("dir"),touchThreshold:20,infinite:o.loop&&(!i.data("ajax-url")||i.data("ajax-url")&&o.autoplay_continuous_scroll&&o.autoplay),variableWidth:i.data("variable_width"),accessibility:!1,adaptiveHeight:o.adaptive_height,cssEase:o.animation,speed:o.animation_speed,slidesToScroll:t.desktop_slides_to_scroll,slidesToShow:void 0===t.desktop_slides_to_show?t.desktop_slides_to_scroll:t.desktop_slides_to_show,responsive:[{breakpoint:t.tablet_portrait_breakpoint,settings:{slidesToScroll:t.tablet_portrait_slides_to_scroll,slidesToShow:void 0===t.tablet_portrait_slides_to_show?t.tablet_portrait_slides_to_scroll:t.tablet_portrait_slides_to_show}},{breakpoint:t.mobile_breakpoint,settings:{slidesToScroll:t.mobile_slides_to_scroll,slidesToShow:void 0===t.mobile_slides_to_show?t.mobile_slides_to_scroll:t.mobile_slides_to_show}}]}),o.item_overflow&&(e.css("width",""),e.css("opacity","")),e.on("swipe",(function(s,e,t){i.parent().parent().find(".sow-carousel-"+("left"==t?"next":"prev")).trigger("touchend")})),o.autoplay){var l=!1,a=i.parent().parent().find(".sow-carousel-"+("ltr"==i.data("dir")?"next":"prev"));s("body").hasClass("block-editor-page")||(setInterval((function(){l||a.trigger("click")}),o.autoplaySpeed),o.pauseOnHover&&(e.on("mouseenter.slick",(function(){l=!0})),e.on("mouseleave.slick",(function(){l=!1}))))}if(i.parent().parent().find(".sow-carousel-previous, .sow-carousel-next").on("click touchend",(function(e,t){e.preventDefault();var l=i.find(".sow-carousel-items"),a=l.find(".sow-carousel-item").length,c=a>=i.data("item_count"),d=Math.ceil(l.outerWidth()/l.find(".sow-carousel-item").outerWidth(!0)),n=Math.floor(l.outerWidth()/l.find(".sow-carousel-item").outerWidth(!0)),r=l.slick("slickGetOption","slidesToScroll"),u=a-d,k=!1;"post"==i.data("widget")&&"undefined"!=i.data("carousel_settings").theme&&c&&u++,c||(l.slick("slickCurrentSlide")+d>=a-1||l.slick("slickCurrentSlide")+r>u)&&(s(sowb).trigger("carousel_load_new_items",[i,l,t]),k=!0),s(this).hasClass("sow-carousel-next")&&!k?c&&l.slick("slickCurrentSlide")>=u?i.data("carousel_settings").loop&&l.slick("slickGoTo",0):"post"==i.data("widget")&&"undefined"==i.data("carousel_settings").theme&&r>=n?(l.slick("slickSetOption","slidesToShow",n),l.slick("slickSetOption","slidesToScroll",n),l.slick("slickNext")):l.slick("slickCurrentSlide")+r>u?l.setSlideTo(u):l.slick("slickNext"):s(this).hasClass("sow-carousel-previous")&&(i.data("carousel_settings").loop&&0==l.slick("slickCurrentSlide")?l.slick("slickGoTo",u):"post"==i.data("widget")&&l.slick("slickCurrentSlide")<=r?l.slick("slickGoTo",0):l.slick("slickPrev")),o.dots&&"post"==i.data("widget")&&(i.find("li.slick-active").removeClass("slick-active"),i.find(".slick-dots li").eq(Math.ceil(i.find(".sow-carousel-items").slick("slickCurrentSlide")/r)).addClass("slick-active"))})),o.dots&&(i.data("variable_width")||i.data("carousel_settings").theme)){i.find(".slick-dots li").off("click.slick");var c=function(){e=i.find(".sow-carousel-items");var t=s(this).index(),o=e.slick("slickGetOption","slidesToScroll"),l=e.find(".sow-carousel-item").length,a=Math.ceil(e.outerWidth()/e.find(".sow-carousel-item").outerWidth(!0)),c=l-a;(t+a>=l?(e.slick("slickGoTo",c),$dots=s(this).parent(),$dots.find(".slick-active").removeClass("slick-active"),$dots.children().eq(t).addClass("slick-active")):("post"==i.data("widget")&&(t=Math.ceil(s(this).index()*o)),e.slick("slickGoTo",t)),"post"==i.data("widget"))&&(l>=i.data("item_count")||(e.slick("slickCurrentSlide")+a>=l-1||e.slick("slickCurrentSlide")+o>c)&&s(sowb).trigger("carousel_load_new_items",[i,e,!1]))};i.find(".slick-dots li").on("click touchend",c),s(sowb).on("carousel_posts_added",(function(){i.find(".slick-dots li").on("click touchend",c)}))}})),s(sowb).trigger("carousel_setup"),s(document).on("keydown",".sow-carousel-navigation a",(function(i){13!=i.keyCode&&32!=i.keyCode||(i.preventDefault(),s(this).trigger("click"))})),s(document).on("keyup",".sow-carousel-item",(function(i){if(13==i.keyCode&&s(this).find("h3 a")[0].click(),37==i.keyCode||39==i.keyCode){var e=s(this).parents(".sow-carousel-wrapper"),t=e.find(".sow-carousel-items"),o=t.find(".sow-carousel-item").length,l=s(this).data("slick-index"),a=o-(o===e.data("item_count")?0:1);if(37==i.keyCode)--l<0&&(l=a);else if(39==i.keyCode&&++l>=a){if(e.data("fetching"))return;e.parent().find(".sow-carousel-next").trigger("click",!0)}t.slick("slickGoTo",l,!0),e.find(".sow-carousel-item").prop("tabindex",-1),e.find('.sow-carousel-item[data-slick-index="'+l+'"]').trigger("focus").prop("tabindex",0)}}));var i=function(){s(".sow-carousel-wrapper").each((function(){var i=s(this),e=i.find(".sow-carousel-items.slick-initialized"),t=i.data("responsive");window.matchMedia("(min-width: "+t.tablet_portrait_breakpoint+"px) and (max-width: "+t.tablet_landscape_breakpoint+"px) and (orientation: landscape)").matches&&(e.slick("slickSetOption","slidesToShow",t.tablet_landscape_slides_to_show),e.slick("slickSetOption","slidesToScroll",t.tablet_landscape_slides_to_scroll))})),s(".sow-carousel-item:first-of-type").prop("tabindex",0)};i(),s(window).on("resize load",i)},sowb.setupCarousel(),s(sowb).on("setup_widgets",sowb.setupCarousel)})),window.sowb=sowb;