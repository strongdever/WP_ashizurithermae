var sowb=window.sowb||{};jQuery((function(t){sowb.setupSimpleMasonries=function(){var i=t(".sow-masonry-grid");if(i.data("initialized"))return i;var a=function(){i.each((function(){var a=t(this),e=a.data("layouts"),o=window.matchMedia("(max-width: "+e.tablet.breakPoint+"px)"),n=window.matchMedia("(max-width: "+e.mobile.breakPoint+"px)"),s=e.desktop;n.matches?s=e.mobile:o.matches&&(s=e.tablet);var r=s.numColumns;a.css("width","auto");var m=s.gutter*(r-1),d=(a.width()-m)/r;a.width(d*r+m),a.imagesLoaded((function(){a.find("> .sow-masonry-grid-item").each((function(){var i=t(this),a=i.data("colSpan");a=Math.max(Math.min(a,s.numColumns),1),i.width(d*a+s.gutter*(a-1));var e=i.data("rowSpan");e=Math.max(Math.min(e,s.numColumns),1);var o=s.rowHeight||d;i.css("height",o*e+s.gutter*(e-1)+"px");var n=i.find("> img,> a > img"),r=!1;if(i.find(".image-title")){var m=parseInt(i.find(".image-title").outerHeight());isNaN(m)||(o+=m,i.find(".sow-masonry-grid-image").css("height","calc( 100% - "+m+"px)"),r=!0)}n.css("height",r?i.height()-m:i.height()+"px")})),a.packery({itemSelector:".sow-masonry-grid-item",columnWidth:d,gutter:s.gutter,originLeft:a.data("layout-origin-left")}),i.prev(".sow-masonry-grid-preloader").length&&(i.prev().remove(),i.css("opacity",1))}))}))};t(window).on("resize panelsStretchRows",a),setTimeout((function(){a()}),100),i.data("initialized",!0)},sowb.setupSimpleMasonries(),t(sowb).on("setup_widgets",sowb.setupSimpleMasonries)})),window.sowb=sowb;